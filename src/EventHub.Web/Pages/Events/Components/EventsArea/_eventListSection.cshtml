@using System.Globalization
@using EventHub.Web.Helpers
@using EventHub.Web.Pages.Events
@model List<EventHub.Events.EventInListDto>

@foreach (var eventDto in Model)
{
    <div class="col-lg-4 col-md-6 event">
        <div class="card">
            @if (eventDto.CoverImageContent is null)
            {
                <div class="rounded list-span text-center" style="background: @(CoverImageHelper.GetRandomColor(eventDto.Title))">
                    <span>@CoverImageHelper.GetTitle(eventDto.Title).TruncateWithPostfix(40)</span>
                </div>
            }
            else
            {
                <img abp-card-image="Top" style="max-height: 400px; min-height: 160px;" src="@($"data:image/png;base64,{Convert.ToBase64String(eventDto.CoverImageContent)}")" alt="@eventDto.Title"/>
            }
            <div class="card-body">
                <div class="event-container">
                    <div class="form-row">
                        <div class="col-3">
                            <div class="event-date text-center">
                                <small>@eventDto.StartTime.ToString("MMM")</small>
                                <span>@eventDto.StartTime.Day</span>
                            </div>
                        </div>
                        <div class="col-9">
                            <div class="event-info">
                                <h5>@eventDto.Title</h5>
                                <small>@eventDto.StartTime.ToString("hh tt", CultureInfo.InvariantCulture) - @eventDto.EndTime.ToString("hh tt", CultureInfo.InvariantCulture) | @EventDateHelper.GetLocationInfo(eventDto)</small>
                                <p>@eventDto.Description</p>
                            </div>
                            <a href="@Url.Page("/Events/Detail", new {url = eventDto.Url})" class="btn btn-link p-0">Learn More <img src="/assets/more-btn.svg"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}